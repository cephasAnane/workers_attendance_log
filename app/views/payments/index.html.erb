<div class="container mx-auto px-4 py-8">
  <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
    <h2 class="text-2xl font-bold text-white">My Payments</h2>
    <%= link_to "Request Advance", new_payment_path, class: "bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-500 transition shadow-lg font-bold w-full md:w-auto text-center" %>
  </div>

  <div class="flex justify-between items-end border-b border-gray-700 pb-2 mb-4">
    <h3 class="text-xl text-gray-400 font-semibold">Payment History</h3>
    <span class="text-xs text-gray-500 md:hidden">Swipe &rarr;</span>
  </div>

  <div class="bg-gray-800 shadow-lg rounded-lg overflow-hidden border border-gray-700 mb-8">
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-700">
        <thead class="bg-gray-900">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase whitespace-nowrap">Date</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase whitespace-nowrap">Amount</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase whitespace-nowrap">Note</th>
            <th class="px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase whitespace-nowrap">Status / Download</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-700">
          <% @payments.each do |pay| %>
            <tr class="hover:bg-gray-700 transition">
              
              <td class="px-6 py-4 text-white whitespace-nowrap">
                <%= pay.payment_date.strftime("%b %d, %Y") %>
              </td>

              <td class="px-6 py-4 text-green-400 font-bold whitespace-nowrap">
                $<%= pay.amount %>
              </td>

              <td class="px-6 py-4 text-gray-400 text-sm min-w-[200px]">
                <%= pay.note || "Salary Payment" %>
              </td>

              <td class="px-6 py-4 text-center whitespace-nowrap">
                <div class="flex items-center justify-center gap-3">
                  <span class="bg-green-900 text-green-200 border border-green-700 px-2 py-1 rounded-full text-xs">Paid</span>
                  
                  <%= link_to payment_path(pay, format: :pdf), class: "text-gray-400 hover:text-white transition", title: "Download Payslip", target: "_blank" do %>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
                    </svg>
                  <% end %>
                </div>
              </td>

            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="flex justify-between items-end border-b border-gray-700 pb-2 mb-4">
    <h3 class="text-xl text-gray-400 font-semibold">My Requests</h3>
    <span class="text-xs text-gray-500 md:hidden">Swipe &rarr;</span>
  </div>

  <div class="bg-gray-800 shadow-lg rounded-lg overflow-hidden border border-gray-700">
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-700">
        <thead class="bg-gray-900">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase whitespace-nowrap">Date</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase whitespace-nowrap">Amount Requested</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase whitespace-nowrap">Reason</th>
            <th class="px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase whitespace-nowrap">Status</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-700">
          <% @requests.each do |req| %>
            <tr class="hover:bg-gray-700 transition">
              <td class="px-6 py-4 text-gray-400 whitespace-nowrap"><%= req.created_at.strftime("%b %d") %></td>
              <td class="px-6 py-4 text-white whitespace-nowrap">$<%= req.amount %></td>
              <td class="px-6 py-4 text-gray-400 text-sm min-w-[200px]"><%= req.reason %></td>
              <td class="px-6 py-4 text-center whitespace-nowrap">
                <span class="px-2 py-1 rounded-full text-xs font-semibold capitalize bg-gray-700 text-gray-300"><%= req.status %></span>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>